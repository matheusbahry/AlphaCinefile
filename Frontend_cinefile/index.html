<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cinefile â€” CatÃ¡logo</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="icon" href="assets/favicon.ico" />
</head>
<body>
  <!-- CabeÃ§alho -->
  <header class="nav">
    <div class="nav__container">
      <div class="nav__brand">Cinefile</div>

      <button class="nav__toggle" id="navToggle"
              aria-label="Abrir menu" aria-expanded="false" aria-controls="primaryMenu">
        <span class="nav__bar"></span>
        <span class="nav__bar"></span>
        <span class="nav__bar"></span>
      </button>

      <div class="nav__right">
        <nav class="nav__menu" aria-label="Principal">
          <a href="index.html" class="nav__link">CatÃ¡logo</a>
          <a href="watchlist.html" class="nav__link requires-auth">Watchlist</a>
          <a href="watched.html" class="nav__link requires-auth">Assistidos</a>
          <a href="profile.html" class="nav__link requires-auth">Perfil</a>

          <a href="login.html" class="nav__link link-login">Entrar</a>
          <a href="register.html" class="nav__link link-register">Cadastrar</a>
          <a href="#" class="nav__link link-logout">Sair</a>
        </nav>

        <form class="nav__search" id="searchForm" role="search" aria-label="Buscar tÃ­tulos">
          <input type="search" id="searchInput" class="nav__searchInput"
                 placeholder="Buscar..." aria-label="Buscar por filme ou sÃ©rie" />
          <span class="nav__icon-search" aria-hidden="true"></span>
        </form>
      </div>
    </div>

    <div class="nav__drawer" id="navDrawer" hidden>
      <nav class="nav__menu" id="primaryMenu" aria-label="Principal">
        <a href="index.html" class="nav__link">CatÃ¡logo</a>
        <a href="watchlist.html" class="nav__link requires-auth">Watchlist</a>
        <a href="watched.html" class="nav__link requires-auth">Assistidos</a>
        <a href="profile.html" class="nav__link requires-auth">Perfil</a>
        <a href="login.html" class="nav__link link-login">Entrar</a>
        <a href="register.html" class="nav__link link-register">Cadastrar</a>
        <a href="#" class="nav__link link-logout">Sair</a>
      </nav>
    </div>
  </header>

  <!-- ConteÃºdo -->
  <main class="home">
    <div id="catalogState" class="catalog__state" hidden></div>

    <!-- Resultados da busca -->
    <section class="row" id="rowSearch" hidden aria-label="Resultados da busca">
      <div class="row__head">
        <h2 class="row__title">Resultados</h2>
        <div class="row__meta" id="searchCount">0 resultados</div>
      </div>
      <div class="row__scroller" id="searchScroller" tabindex="0"></div>
      <button class="row__ctrlBtn is-left" data-target="searchScroller" data-dir="prev" aria-label="Anterior">â€¹</button>
      <button class="row__ctrlBtn is-right" data-target="searchScroller" data-dir="next" aria-label="PrÃ³ximo">â€º</button>
    </section>

    <!-- Em alta -->
    <section class="row" aria-label="Em alta">
      <div class="row__head"><h2 class="row__title">Em alta</h2></div>
      <div class="row__scroller" id="featuredScroller" tabindex="0"></div>
      <button class="row__ctrlBtn is-left" data-target="featuredScroller" data-dir="prev" aria-label="Anterior">â€¹</button>
      <button class="row__ctrlBtn is-right" data-target="featuredScroller" data-dir="next" aria-label="PrÃ³ximo">â€º</button>
    </section>

    <!-- Filmes -->
    <section class="row" aria-label="Filmes">
      <div class="row__head"><h2 class="row__title">Filmes</h2></div>
      <div class="row__scroller" id="moviesScroller" tabindex="0"></div>
      <button class="row__ctrlBtn is-left" data-target="moviesScroller" data-dir="prev" aria-label="Anterior">â€¹</button>
      <button class="row__ctrlBtn is-right" data-target="moviesScroller" data-dir="next" aria-label="PrÃ³ximo">â€º</button>
    </section>

    <!-- SÃ©ries -->
    <section class="row" aria-label="SÃ©ries">
      <div class="row__head"><h2 class="row__title">SÃ©ries</h2></div>
      <div class="row__scroller" id="seriesScroller" tabindex="0"></div>
      <button class="row__ctrlBtn is-left" data-target="seriesScroller" data-dir="prev" aria-label="Anterior">â€¹</button>
      <button class="row__ctrlBtn is-right" data-target="seriesScroller" data-dir="next" aria-label="PrÃ³ximo">â€º</button>
    </section>
  </main>

  <footer class="footer">
    <p>Â© 2025 Cinefile â€” PFC Sistemas de InformaÃ§Ã£o</p>
  </footer>

  <!-- SCRIPTS -->
  <script src="js/api.js"></script>`n  <script src="js/config.public.js"></script>
  <script src="js/config.js"></script>
  <script src="js/index.js"></script>
  <script src="js/components.js"></script>
  <script src="js/tmdb.js"></script>
  <script src="js/nav.js"></script>
  <script src="js/auth.js"></script>

  <!-- CorreÃ§Ã£o de pÃ´steres TMDB sem alterar layout -->
  <script>
  function resolvePoster(input) {
    if (!input) return "assets/placeholder.png";
    const s = String(input).trim();
    if (/^https?:\/\//i.test(s)) return s;
    if (s.startsWith("/")) return `https://image.tmdb.org/t/p/w342${s}`;
    if (/\.(jpg|jpeg|png|webp)$/i.test(s)) return `https://image.tmdb.org/t/p/w342/${s}`;
    return "assets/placeholder.png";
  }

  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".card__poster, .obra-card img, .details__poster").forEach(img => {
      const src = img.getAttribute("src");
      img.src = resolvePoster(src);
      img.onerror = () => (img.src = "assets/placeholder.png");
    });
  });
  </script>
  <script src="js/fix-posters.js"></script>
</body>
</html>

